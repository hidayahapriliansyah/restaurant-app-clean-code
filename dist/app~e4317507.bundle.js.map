{"version":3,"file":"app~e4317507.bundle.js","mappings":"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","sources":["webpack://restaurant-apps/./src/scripts/routes/routes.js","webpack://restaurant-apps/./src/scripts/routes/url-parser.js","webpack://restaurant-apps/./src/scripts/utils/add-review-initiator.js","webpack://restaurant-apps/./src/scripts/utils/drawer-initiator.js","webpack://restaurant-apps/./src/scripts/utils/favorite-button-initiator.js","webpack://restaurant-apps/./src/scripts/utils/sw-register.js"],"sourcesContent":["import Home from '../views/pages/home';\r\nimport Detail from '../views/pages/detail';\r\nimport Reviews from '../views/pages/reviews';\r\nimport FavoriteRestaurant from '../views/pages/favorite-restaurant';\r\n\r\nconst routes = {\r\n  '/': Home,\r\n  '/favorite-restaurant': FavoriteRestaurant,\r\n  '/detail/:id': Detail,\r\n  '/reviews/:id': Reviews,\r\n};\r\n\r\nexport default routes;\r\n","const UrlParser = {\r\n  parseActiveUrlWithCombiner() {\r\n    const url = window.location.hash.slice(1).toLowerCase();\r\n    const splittedUrl = this._urlSplitter(url);\r\n    return this._urlCombiner(splittedUrl);\r\n  },\r\n\r\n  parseActiveUrlWithoutCombiner() {\r\n    const url = window.location.hash.slice(1).toLowerCase();\r\n    return this._urlSplitter(url);\r\n  },\r\n\r\n  _urlSplitter(url) {\r\n    const urlsSplits = url.split('/');\r\n    return {\r\n      resource: urlsSplits[1] || null,\r\n      id: urlsSplits[2] || null,\r\n      verb: urlsSplits[3] || null,\r\n    };\r\n  },\r\n\r\n  _urlCombiner(splittedUrl) {\r\n    return (splittedUrl.resource ? `/${splittedUrl.resource}` : '/')\r\n    + (splittedUrl.id ? '/:id' : '')\r\n    + (splittedUrl.verb ? `/${splittedUrl.verb}` : '');\r\n  },\r\n};\r\n\r\nexport default UrlParser;\r\n","import CONFIG from '../globals/config';\r\nimport RestaurantData from '../data/restaurant-data';\r\nimport { createReviewContentCard } from '../views/templates/template-creator';\r\n\r\nconst AddReviewInitiator = {\r\n  init({\r\n    addReviewContainer,\r\n    restaurantId,\r\n    customerReviewsCount,\r\n    reviewsContainer,\r\n  }) {\r\n    this._addReviewContainer = addReviewContainer;\r\n    this._restaurantId = restaurantId;\r\n    this._customerReviewsCount = customerReviewsCount;\r\n    this._reviewsContainer = reviewsContainer;\r\n\r\n    this._renderAddReview();\r\n    this._reviewSender();\r\n  },\r\n\r\n  _renderAddReview() {\r\n    this._addReviewContainer.innerHTML = `\r\n    <div class=\"reviews__add\">\r\n      <form>\r\n        <span><p>Tambah Review</p></span>\r\n        <div>\r\n          <input type=\"text\" id=\"review-name\" placeholder=\"Nama\" aria-label=\"Nama reviewer\" required>\r\n        </div>\r\n        <div>\r\n          <textarea type=\"text\" id=\"review-body\" placeholder=\"Review\" aria-label=\"Isi review\" required></textarea>\r\n        </div>\r\n        <button type=\"submit\" id=\"review-submit\" aria-label=\"Kirim review\" data-doc=${this._restaurantId}>Kirim!</button>\r\n      </form>\r\n    </div>\r\n    `;\r\n  },\r\n\r\n  _reviewSender() {\r\n    const form = document.querySelector('form');\r\n\r\n    form.addEventListener('submit', async (e) => {\r\n      e.preventDefault();\r\n\r\n      const nameInput = document.querySelector('#review-name');\r\n      const reviewInput = document.querySelector('#review-body');\r\n      const btnSubmit = document.querySelector('#review-submit');\r\n\r\n      const name = nameInput.value;\r\n      const review = reviewInput.value;\r\n      const restaurantId = btnSubmit.dataset.doc;\r\n      const payload = {\r\n        id: restaurantId,\r\n        name,\r\n        review,\r\n      };\r\n\r\n      btnSubmit.innerHTML = '<div class=\"button-loader-container\"><span class=\"button-loader\"></span><div>';\r\n      try {\r\n        await fetch(`${CONFIG.BASE_URL}review`, {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n          body: JSON.stringify(payload),\r\n        });\r\n        await this._renderReviewList();\r\n        nameInput.value = '';\r\n        reviewInput.value = '';\r\n        // eslint-disable-next-line no-alert\r\n        alert(`Review dari ${name} telah ditambahkan!`);\r\n        btnSubmit.innerHTML = 'Kirim!';\r\n      } catch (error) {\r\n        if (error.message === 'Failed to fetch') {\r\n          error.message += ': Terjadi masalah koneksi internet';\r\n        }\r\n        // eslint-disable-next-line no-alert\r\n        alert(error.message);\r\n      }\r\n    });\r\n  },\r\n\r\n  async _renderReviewList() {\r\n    const restaurant = await RestaurantData.detailRestaurant(this._restaurantId);\r\n    const { customerReviews: reviews } = restaurant;\r\n\r\n    this._customerReviewsCount.innerHTML = reviews.length;\r\n    this._reviewsContainer.innerHTML = createReviewContentCard(reviews.reverse());\r\n    console.log('innerHtml', this._reviewsContainer.innerHTML);\r\n\r\n    if (reviews.length > 3) {\r\n      const moreReviewContainer = document.querySelector('.detail__review-more');\r\n      moreReviewContainer.innerHTML = `<a href=\"#/reviews/${restaurant.id}\">Lihat ${reviews.length - 3} review lainnya</a>`;\r\n    }\r\n  },\r\n};\r\n\r\nexport default AddReviewInitiator;\r\n","const DrawerInitiator = {\r\n  init({ hamburger, drawer, content }) {\r\n    hamburger.addEventListener('click', (event) => {\r\n      this._toogleXHamburger(hamburger);\r\n      this._toggleDrawer(event, drawer);\r\n    });\r\n\r\n    content.addEventListener('click', (event) => {\r\n      if (hamburger.classList.contains('x')) {\r\n        this._toogleXHamburger(hamburger);\r\n      }\r\n\r\n      this._closeDrawer(event, drawer);\r\n    });\r\n  },\r\n\r\n  _toogleXHamburger(hamburger) {\r\n    hamburger.classList.toggle('x');\r\n  },\r\n\r\n  _toggleDrawer(event, drawer) {\r\n    event.stopPropagation();\r\n    drawer.classList.toggle('active');\r\n  },\r\n\r\n  _closeDrawer(event, drawer) {\r\n    event.stopPropagation();\r\n    drawer.classList.remove('active');\r\n  },\r\n};\r\n\r\nexport default DrawerInitiator;\r\n","import FavoriteRestaurantIdb from '../data/favorite-restaurant-idb';\r\nimport { createFavoriteButtonTemplate, createFavoritedButtonTemplate } from '../views/templates/template-creator';\r\n\r\nconst FavoriteButtonInitiator = {\r\n  async init({ favoriteButtonContainer, restaurant }) {\r\n    this._favoriteButtonContianer = favoriteButtonContainer;\r\n    this._restaurant = restaurant;\r\n\r\n    await this._renderButton();\r\n  },\r\n\r\n  async _renderButton() {\r\n    const { id } = this._restaurant;\r\n\r\n    if (await this._isRestaurantExist(id)) {\r\n      this._renderFavorited();\r\n    } else {\r\n      this._renderFavorite();\r\n    }\r\n  },\r\n\r\n  async _isRestaurantExist(id) {\r\n    const restaurant = await FavoriteRestaurantIdb.getRestaurant(id);\r\n    return !!restaurant;\r\n  },\r\n\r\n  _renderFavorite() {\r\n    this._favoriteButtonContianer.innerHTML = createFavoriteButtonTemplate();\r\n\r\n    const favoriteButton = document.querySelector('#favorite-button');\r\n    favoriteButton.addEventListener('click', async () => {\r\n      await FavoriteRestaurantIdb.putRestaurant(this._restaurant);\r\n      this._renderButton();\r\n      // eslint-disable-next-line no-alert\r\n      alert(`${this._restaurant.name} ditambahkan ke Favorite`);\r\n    });\r\n  },\r\n\r\n  _renderFavorited() {\r\n    this._favoriteButtonContianer.innerHTML = createFavoritedButtonTemplate();\r\n\r\n    const favoriteButton = document.querySelector('#favorite-button');\r\n    favoriteButton.addEventListener('click', async () => {\r\n      await FavoriteRestaurantIdb.deleteRestaurant(this._restaurant.id);\r\n      this._renderButton();\r\n      // eslint-disable-next-line no-alert\r\n      window.alert(`${this._restaurant.name} dihapus dari Favorite`);\r\n    });\r\n  },\r\n};\r\n\r\nexport default FavoriteButtonInitiator;\r\n","import * as WorkboxWindow from 'workbox-window';\r\n\r\nconst swRegister = async () => {\r\n  if (!('serviceWorker' in navigator)) {\r\n    console.log('Service Worker not supported in the browser');\r\n    return;\r\n  }\r\n\r\n  const wb = new WorkboxWindow.Workbox('./sw.bundle.js');\r\n\r\n  try {\r\n    await wb.register();\r\n    console.log('Service worker registered');\r\n  } catch (error) {\r\n    console.log('Failed to register service worker', error);\r\n  }\r\n};\r\n\r\nexport default swRegister;\r\n"],"names":["Home","FavoriteRestaurant","Detail","Reviews","parseActiveUrlWithCombiner","url","window","location","hash","slice","toLowerCase","splittedUrl","this","_urlSplitter","_urlCombiner","parseActiveUrlWithoutCombiner","urlsSplits","split","resource","id","verb","i","init","addReviewContainer","restaurantId","customerReviewsCount","reviewsContainer","_addReviewContainer","_restaurantId","_customerReviewsCount","_reviewsContainer","_renderAddReview","_reviewSender","innerHTML","document","querySelector","addEventListener","e","preventDefault","nameInput","reviewInput","btnSubmit","name","value","review","dataset","doc","payload","fetch","CONFIG","method","headers","body","JSON","stringify","_renderReviewList","alert","message","RestaurantData","restaurant","reviews","customerReviews","length","createReviewContentCard","reverse","console","log","hamburger","drawer","content","event","_toogleXHamburger","_toggleDrawer","classList","contains","_closeDrawer","toggle","stopPropagation","remove","favoriteButtonContainer","_favoriteButtonContianer","_restaurant","_renderButton","_isRestaurantExist","_renderFavorited","_renderFavorite","FavoriteRestaurantIdb","createFavoriteButtonTemplate","createFavoritedButtonTemplate","navigator","wb","WorkboxWindow","register"],"sourceRoot":""}